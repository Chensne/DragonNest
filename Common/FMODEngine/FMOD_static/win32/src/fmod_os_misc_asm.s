%include "./FMOD_static/win32/src/c32.mac"

; ==========================================================================================
; GLOBAL UNINITIALIZED DATA
; ==========================================================================================

[SEGMENT .data use32 align=32]

; ==========================================================================================
; CODE
; ==========================================================================================

[SEGMENT .text use32 align=32]

; =================================================================================================================================
; int FMOD_OS_SupportsSSE
; =================================================================================================================================
proc FMOD_OS_SupportsSSE

		push	ebx
		push	ecx
		push	edx
		push	esi
		push	edi

  		mov		eax, 1
		cpuid         
		test	edx, 02000000h
		jnz		SSEFound
		mov		eax, 0
		jmp     SSETestEnd
	  SSEFound:
		mov		eax, 1
	  SSETestEnd:

		pop		edi
		pop		esi
		pop		edx
		pop		ecx
		pop		ebx
endproc
