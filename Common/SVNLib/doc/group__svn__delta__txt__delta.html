<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Subversion: Text deltas</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Text deltas<br>
<small>
[<a class="el" href="group__delta__support.html">Delta generation and handling</a>]</small>
</h1>Text deltas.  
<a href="#_details">More...</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsvn__txdelta__op__t.html">svn_txdelta_op_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A single text delta instruction.  <a href="structsvn__txdelta__op__t.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsvn__txdelta__window__t.html">svn_txdelta_window_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">An <code><a class="el" href="structsvn__txdelta__window__t.html" title="An svn_txdelta_window_t object describes how to reconstruct a contiguous section...">svn_txdelta_window_t</a></code> object describes how to reconstruct a contiguous section of the target string (the "target view") using a specified contiguous region of the source string (the "source view").  <a href="structsvn__txdelta__window__t.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="structsvn__error__t.html">svn_error_t</a> *(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__delta__txt__delta.html#g1c0d461a3f244928d7f0339c1cbe3219">svn_txdelta_window_handler_t</a> )(<a class="el" href="structsvn__txdelta__window__t.html">svn_txdelta_window_t</a> *window, void *baton)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A typedef for functions that consume a series of delta windows, for use in caller-pushes interfaces.  <a href="#g1c0d461a3f244928d7f0339c1cbe3219"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef struct <a class="el" href="group__svn__delta__txt__delta.html#gf599af000e3c3b976c17fd4e101ff7cf">svn_txdelta_stream_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__delta__txt__delta.html#gf599af000e3c3b976c17fd4e101ff7cf">svn_txdelta_stream_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A delta stream --- this is the hat from which we pull a series of <a class="el" href="structsvn__txdelta__window__t.html" title="An svn_txdelta_window_t object describes how to reconstruct a contiguous section...">svn_txdelta_window_t</a> objects, which, taken in order, describe the entire target string.  <a href="#gf599af000e3c3b976c17fd4e101ff7cf"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="structsvn__error__t.html">svn_error_t</a> *(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__delta__txt__delta.html#g296cf74e5f15272c6c3d00004eddf406">svn_txdelta_next_window_fn_t</a> )(<a class="el" href="structsvn__txdelta__window__t.html">svn_txdelta_window_t</a> **window, void *baton, apr_pool_t *pool)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A typedef for a function that will set <em>*window</em> to the next window from a <code>svn_txdelta_stream_t</code> object.  <a href="#g296cf74e5f15272c6c3d00004eddf406"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef const unsigned char *(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__delta__txt__delta.html#gcda8999d7a2265e755f242046e28b5e9">svn_txdelta_md5_digest_fn_t</a> )(void *baton)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A typedef for a function that will return the md5 checksum of the fulltext deltified by a <code>svn_txdelta_stream_t</code> object.  <a href="#gcda8999d7a2265e755f242046e28b5e9"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__delta__txt__delta.html#gf3573b839c4304ba1da5b1439670f8b2">svn_delta_action</a> { <br>
&nbsp;&nbsp;<a class="el" href="group__svn__delta__txt__delta.html#ggf3573b839c4304ba1da5b1439670f8b2fe06d9c8967b916063ecb3f5f9b55def">svn_txdelta_source</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="group__svn__delta__txt__delta.html#ggf3573b839c4304ba1da5b1439670f8b2062da1724f5f9232e50204d4fbb50099">svn_txdelta_target</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="group__svn__delta__txt__delta.html#ggf3573b839c4304ba1da5b1439670f8b23200127b02e484799d0ad81c6761db60">svn_txdelta_new</a>
<br>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Action codes for text delta instructions.  <a href="group__svn__delta__txt__delta.html#gf3573b839c4304ba1da5b1439670f8b2">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structsvn__txdelta__window__t.html">svn_txdelta_window_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__delta__txt__delta.html#g743bfce28d8d52bfe5aead62362e9c16">svn_txdelta_window_dup</a> (const <a class="el" href="structsvn__txdelta__window__t.html">svn_txdelta_window_t</a> *window, apr_pool_t *pool)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return a deep copy of <em>window</em>, allocated in <em>pool</em>.  <a href="#g743bfce28d8d52bfe5aead62362e9c16"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structsvn__txdelta__window__t.html">svn_txdelta_window_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__delta__txt__delta.html#g208f3793d9c65578c6fc85bb0d8246d9">svn_txdelta_compose_windows</a> (const <a class="el" href="structsvn__txdelta__window__t.html">svn_txdelta_window_t</a> *window_A, const <a class="el" href="structsvn__txdelta__window__t.html">svn_txdelta_window_t</a> *window_B, apr_pool_t *pool)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Compose two delta windows, yielding a third, allocated in <em>pool</em>.  <a href="#g208f3793d9c65578c6fc85bb0d8246d9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__delta__txt__delta.html#g91ce8c5539fd82aa891da56d10262677">svn_txdelta_apply_instructions</a> (<a class="el" href="structsvn__txdelta__window__t.html">svn_txdelta_window_t</a> *window, const char *sbuf, char *tbuf, apr_size_t *tlen)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Apply the instructions from <em>window</em> to a source view <em>sbuf</em> to produce a target view <em>tbuf</em>.  <a href="#g91ce8c5539fd82aa891da56d10262677"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__svn__delta__txt__delta.html#gf599af000e3c3b976c17fd4e101ff7cf">svn_txdelta_stream_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__delta__txt__delta.html#gb4e0ec602322485190a512512e874d73">svn_txdelta_stream_create</a> (void *baton, <a class="el" href="group__svn__delta__txt__delta.html#g296cf74e5f15272c6c3d00004eddf406">svn_txdelta_next_window_fn_t</a> next_window, <a class="el" href="group__svn__delta__txt__delta.html#gcda8999d7a2265e755f242046e28b5e9">svn_txdelta_md5_digest_fn_t</a> md5_digest, apr_pool_t *pool)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create and return a generic text delta stream with <em>baton</em>, <em>next_window</em> and <em>md5_digest</em>.  <a href="#gb4e0ec602322485190a512512e874d73"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structsvn__error__t.html">svn_error_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__delta__txt__delta.html#gc27c74c1dacbb03d733367858e397d51">svn_txdelta_next_window</a> (<a class="el" href="structsvn__txdelta__window__t.html">svn_txdelta_window_t</a> **window, <a class="el" href="group__svn__delta__txt__delta.html#gf599af000e3c3b976c17fd4e101ff7cf">svn_txdelta_stream_t</a> *stream, apr_pool_t *pool)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set <em>*window</em> to a pointer to the next window from the delta stream <em>stream</em>.  <a href="#gc27c74c1dacbb03d733367858e397d51"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const unsigned char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__delta__txt__delta.html#g5c19d9f9e5049865212fa5cd1ae3df0b">svn_txdelta_md5_digest</a> (<a class="el" href="group__svn__delta__txt__delta.html#gf599af000e3c3b976c17fd4e101ff7cf">svn_txdelta_stream_t</a> *stream)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the md5 digest for the complete fulltext deltified by <em>stream</em>, or <code>NULL</code> if <em>stream</em> has not yet returned its final <code>NULL</code> window.  <a href="#g5c19d9f9e5049865212fa5cd1ae3df0b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__delta__txt__delta.html#ga0b249e231d98783f961cde277b908e7">svn_txdelta</a> (<a class="el" href="group__svn__delta__txt__delta.html#gf599af000e3c3b976c17fd4e101ff7cf">svn_txdelta_stream_t</a> **stream, <a class="el" href="group__svn__io__byte__streams.html#g06d6291c397e63f895deb92a2c14e6af">svn_stream_t</a> *source, <a class="el" href="group__svn__io__byte__streams.html#g06d6291c397e63f895deb92a2c14e6af">svn_stream_t</a> *target, apr_pool_t *pool)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set <em>*stream</em> to a pointer to a delta stream that will turn the byte string from <em>source</em> into the byte stream from <em>target</em>.  <a href="#ga0b249e231d98783f961cde277b908e7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__svn__io__byte__streams.html#g06d6291c397e63f895deb92a2c14e6af">svn_stream_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__delta__txt__delta.html#ga2f6fd3e26aafb6fb9e283c0f9a0f50c">svn_txdelta_target_push</a> (<a class="el" href="group__svn__delta__txt__delta.html#g1c0d461a3f244928d7f0339c1cbe3219">svn_txdelta_window_handler_t</a> handler, void *handler_baton, <a class="el" href="group__svn__io__byte__streams.html#g06d6291c397e63f895deb92a2c14e6af">svn_stream_t</a> *source, apr_pool_t *pool)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return a writable stream which, when fed target data, will send delta windows to <em>handler/<em>handler_baton</em> which</em> transform the data in <em>source</em> to the target data.  <a href="#ga2f6fd3e26aafb6fb9e283c0f9a0f50c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structsvn__error__t.html">svn_error_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__delta__txt__delta.html#g3ec9b8d77259b8de4edf33ad775dc4b0">svn_txdelta_send_string</a> (const <a class="el" href="structsvn__string__t.html">svn_string_t</a> *string, <a class="el" href="group__svn__delta__txt__delta.html#g1c0d461a3f244928d7f0339c1cbe3219">svn_txdelta_window_handler_t</a> handler, void *handler_baton, apr_pool_t *pool)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send the contents of <em>string</em> to window-handler <em>handler/<em>baton</em>.</em>  <a href="#g3ec9b8d77259b8de4edf33ad775dc4b0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structsvn__error__t.html">svn_error_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__delta__txt__delta.html#g2ff49b23d075adb6a70576e122692df5">svn_txdelta_send_stream</a> (<a class="el" href="group__svn__io__byte__streams.html#g06d6291c397e63f895deb92a2c14e6af">svn_stream_t</a> *stream, <a class="el" href="group__svn__delta__txt__delta.html#g1c0d461a3f244928d7f0339c1cbe3219">svn_txdelta_window_handler_t</a> handler, void *handler_baton, unsigned char *digest, apr_pool_t *pool)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send the contents of <em>stream</em> to window-handler <em>handler/<em>baton</em>.</em>  <a href="#g2ff49b23d075adb6a70576e122692df5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structsvn__error__t.html">svn_error_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__delta__txt__delta.html#g9e98ac11b1719e838de16eac06812e9d">svn_txdelta_send_txstream</a> (<a class="el" href="group__svn__delta__txt__delta.html#gf599af000e3c3b976c17fd4e101ff7cf">svn_txdelta_stream_t</a> *txstream, <a class="el" href="group__svn__delta__txt__delta.html#g1c0d461a3f244928d7f0339c1cbe3219">svn_txdelta_window_handler_t</a> handler, void *handler_baton, apr_pool_t *pool)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send the contents of <em>txstream</em> to window-handler <em>handler/<em>baton</em>.</em>  <a href="#g9e98ac11b1719e838de16eac06812e9d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__delta__txt__delta.html#ga3a54c3cdde467a57666ee8d13141738">svn_txdelta_apply</a> (<a class="el" href="group__svn__io__byte__streams.html#g06d6291c397e63f895deb92a2c14e6af">svn_stream_t</a> *source, <a class="el" href="group__svn__io__byte__streams.html#g06d6291c397e63f895deb92a2c14e6af">svn_stream_t</a> *target, unsigned char *result_digest, const char *error_info, apr_pool_t *pool, <a class="el" href="group__svn__delta__txt__delta.html#g1c0d461a3f244928d7f0339c1cbe3219">svn_txdelta_window_handler_t</a> *handler, void **handler_baton)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prepare to apply a text delta.  <a href="#ga3a54c3cdde467a57666ee8d13141738"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__delta__txt__delta.html#gf7354f923339d3338c3083e91bfee472">svn_txdelta_to_svndiff2</a> (<a class="el" href="group__svn__delta__txt__delta.html#g1c0d461a3f244928d7f0339c1cbe3219">svn_txdelta_window_handler_t</a> *handler, void **handler_baton, <a class="el" href="group__svn__io__byte__streams.html#g06d6291c397e63f895deb92a2c14e6af">svn_stream_t</a> *output, int svndiff_version, apr_pool_t *pool)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prepare to produce an svndiff-format diff from text delta windows.  <a href="#gf7354f923339d3338c3083e91bfee472"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__delta__txt__delta.html#g21c7186240b711f22c195bee3afcdcc1">svn_txdelta_to_svndiff</a> (<a class="el" href="group__svn__io__byte__streams.html#g06d6291c397e63f895deb92a2c14e6af">svn_stream_t</a> *output, apr_pool_t *pool, <a class="el" href="group__svn__delta__txt__delta.html#g1c0d461a3f244928d7f0339c1cbe3219">svn_txdelta_window_handler_t</a> *handler, void **handler_baton)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Similar to svn_txdelta_to_svndiff2, but always using svndiff version 0.  <a href="#g21c7186240b711f22c195bee3afcdcc1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__svn__io__byte__streams.html#g06d6291c397e63f895deb92a2c14e6af">svn_stream_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__delta__txt__delta.html#ga1bf544259b22caf4652535e748ad1cf">svn_txdelta_parse_svndiff</a> (<a class="el" href="group__svn__delta__txt__delta.html#g1c0d461a3f244928d7f0339c1cbe3219">svn_txdelta_window_handler_t</a> handler, void *handler_baton, <a class="el" href="svn__types_8h.html#22b35baddc4213c688d1bb12feea1024">svn_boolean_t</a> error_on_early_close, apr_pool_t *pool)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return a writable generic stream which will parse svndiff-format data into a text delta, invoking <em>handler</em> with <em>handler_baton</em> whenever a new window is ready.  <a href="#ga1bf544259b22caf4652535e748ad1cf"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structsvn__error__t.html">svn_error_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__delta__txt__delta.html#g57e1426719fe0dce03fbe227c7bc93e4">svn_txdelta_read_svndiff_window</a> (<a class="el" href="structsvn__txdelta__window__t.html">svn_txdelta_window_t</a> **window, <a class="el" href="group__svn__io__byte__streams.html#g06d6291c397e63f895deb92a2c14e6af">svn_stream_t</a> *stream, int svndiff_version, apr_pool_t *pool)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read and parse one delta window in svndiff format from the readable stream <em>stream</em> and place it in <em>*window</em>, allocating the result in <em>pool</em>.  <a href="#g57e1426719fe0dce03fbe227c7bc93e4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structsvn__error__t.html">svn_error_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__delta__txt__delta.html#g210cb0b472413741f63b903f413450f3">svn_txdelta_skip_svndiff_window</a> (apr_file_t *file, int svndiff_version, apr_pool_t *pool)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read and skip one delta window in svndiff format from the file <em>file</em>.  <a href="#g210cb0b472413741f63b903f413450f3"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Text deltas. 
<p>
A text delta represents the difference between two strings of bytes, the `source' string and the `target' string. Given a source string and a target string, we can compute a text delta; given a source string and a delta, we can reconstruct the target string. However, note that deltas are not reversible: you cannot always reconstruct the source string given the target string and delta.<p>
Since text deltas can be very large, the interface here allows us to produce and consume them in pieces. Each piece, represented by an <code><a class="el" href="structsvn__txdelta__window__t.html" title="An svn_txdelta_window_t object describes how to reconstruct a contiguous section...">svn_txdelta_window_t</a></code> structure, describes how to produce the next section of the target string.<p>
To compute a new text delta:<p>
<ul>
<li>We call <a class="el" href="group__svn__delta__txt__delta.html#ga0b249e231d98783f961cde277b908e7" title="Set *stream to a pointer to a delta stream that will turn the byte string from source...">svn_txdelta()</a> on the streams we want to compare. That returns us an <code>svn_txdelta_stream_t</code> object.</li></ul>
<p>
<ul>
<li>We then call <a class="el" href="group__svn__delta__txt__delta.html#gc27c74c1dacbb03d733367858e397d51" title="Set *window to a pointer to the next window from the delta stream stream.">svn_txdelta_next_window()</a> on the stream object repeatedly. Each call returns a new <code><a class="el" href="structsvn__txdelta__window__t.html" title="An svn_txdelta_window_t object describes how to reconstruct a contiguous section...">svn_txdelta_window_t</a></code> object, which describes the next portion of the target string. When <a class="el" href="group__svn__delta__txt__delta.html#gc27c74c1dacbb03d733367858e397d51" title="Set *window to a pointer to the next window from the delta stream stream.">svn_txdelta_next_window()</a> returns zero, we are done building the target string. </li></ul>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="gcda8999d7a2265e755f242046e28b5e9"></a><!-- doxytag: member="svn_delta.h::svn_txdelta_md5_digest_fn_t" ref="gcda8999d7a2265e755f242046e28b5e9" args=")(void *baton)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef const unsigned char*(* <a class="el" href="group__svn__delta__txt__delta.html#gcda8999d7a2265e755f242046e28b5e9">svn_txdelta_md5_digest_fn_t</a>)(void *baton)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A typedef for a function that will return the md5 checksum of the fulltext deltified by a <code>svn_txdelta_stream_t</code> object. 
<p>
Will return NULL if the final null window hasn't yet been returned by the stream. The returned value will be allocated in the same pool as the stream. <em>baton</em> is the baton specified when the stream was created.<p>
<dl class="since" compact><dt><b>Since:</b></dt><dd>New in 1.4. </dd></dl>

<p>Definition at line <a class="el" href="svn__delta_8h-source.html#l00267">267</a> of file <a class="el" href="svn__delta_8h-source.html">svn_delta.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="g296cf74e5f15272c6c3d00004eddf406"></a><!-- doxytag: member="svn_delta.h::svn_txdelta_next_window_fn_t" ref="g296cf74e5f15272c6c3d00004eddf406" args=")(svn_txdelta_window_t **window, void *baton, apr_pool_t *pool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="structsvn__error__t.html">svn_error_t</a>*(* <a class="el" href="group__svn__delta__txt__delta.html#g296cf74e5f15272c6c3d00004eddf406">svn_txdelta_next_window_fn_t</a>)(<a class="el" href="structsvn__txdelta__window__t.html">svn_txdelta_window_t</a> **window, void *baton, apr_pool_t *pool)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A typedef for a function that will set <em>*window</em> to the next window from a <code>svn_txdelta_stream_t</code> object. 
<p>
If there are no more delta windows, NULL will be used. The returned window, if any, will be allocated in <em>pool</em>. <em>baton</em> is the baton specified when the stream was created.<p>
<dl class="since" compact><dt><b>Since:</b></dt><dd>New in 1.4. </dd></dl>

<p>Definition at line <a class="el" href="svn__delta_8h-source.html#l00253">253</a> of file <a class="el" href="svn__delta_8h-source.html">svn_delta.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="gf599af000e3c3b976c17fd4e101ff7cf"></a><!-- doxytag: member="svn_delta.h::svn_txdelta_stream_t" ref="gf599af000e3c3b976c17fd4e101ff7cf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="group__svn__delta__txt__delta.html#gf599af000e3c3b976c17fd4e101ff7cf">svn_txdelta_stream_t</a> <a class="el" href="group__svn__delta__txt__delta.html#gf599af000e3c3b976c17fd4e101ff7cf">svn_txdelta_stream_t</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A delta stream --- this is the hat from which we pull a series of <a class="el" href="structsvn__txdelta__window__t.html" title="An svn_txdelta_window_t object describes how to reconstruct a contiguous section...">svn_txdelta_window_t</a> objects, which, taken in order, describe the entire target string. 
<p>
This type is defined within libsvn_delta, and opaque outside that library. 
<p>Definition at line <a class="el" href="svn__delta_8h-source.html#l00241">241</a> of file <a class="el" href="svn__delta_8h-source.html">svn_delta.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="g1c0d461a3f244928d7f0339c1cbe3219"></a><!-- doxytag: member="svn_delta.h::svn_txdelta_window_handler_t" ref="g1c0d461a3f244928d7f0339c1cbe3219" args=")(svn_txdelta_window_t *window, void *baton)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="structsvn__error__t.html">svn_error_t</a>*(* <a class="el" href="group__svn__delta__txt__delta.html#g1c0d461a3f244928d7f0339c1cbe3219">svn_txdelta_window_handler_t</a>)(<a class="el" href="structsvn__txdelta__window__t.html">svn_txdelta_window_t</a> *window, void *baton)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A typedef for functions that consume a series of delta windows, for use in caller-pushes interfaces. 
<p>
Such functions will typically apply the delta windows to produce some file, or save the windows somewhere. At the end of the delta window stream, you must call this function passing zero for the <em>window</em> argument. 
<p>Definition at line <a class="el" href="svn__delta_8h-source.html#l00233">233</a> of file <a class="el" href="svn__delta_8h-source.html">svn_delta.h</a>.</p>

</div>
</div><p>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="gf3573b839c4304ba1da5b1439670f8b2"></a><!-- doxytag: member="svn_delta.h::svn_delta_action" ref="gf3573b839c4304ba1da5b1439670f8b2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__svn__delta__txt__delta.html#gf3573b839c4304ba1da5b1439670f8b2">svn_delta_action</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Action codes for text delta instructions. 
<p>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="ggf3573b839c4304ba1da5b1439670f8b2fe06d9c8967b916063ecb3f5f9b55def"></a><!-- doxytag: member="svn_txdelta_source" ref="ggf3573b839c4304ba1da5b1439670f8b2fe06d9c8967b916063ecb3f5f9b55def" args="" -->svn_txdelta_source</em>&nbsp;</td><td>
Append the <em>length</em> bytes at <em>offset</em> in the source view to the target. 
<p>
It must be the case that <em>0</em> &lt;= <em>offset</em> &lt; <em>offset</em> + <em>length</em> &lt;= size of source view. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="ggf3573b839c4304ba1da5b1439670f8b2062da1724f5f9232e50204d4fbb50099"></a><!-- doxytag: member="svn_txdelta_target" ref="ggf3573b839c4304ba1da5b1439670f8b2062da1724f5f9232e50204d4fbb50099" args="" -->svn_txdelta_target</em>&nbsp;</td><td>
Append the <em>length</em> bytes at <em>offset</em> in the target view, to the target. 
<p>
It must be the case that <em>0</em> &lt;= <em>offset</em> &lt; current position in the target view.<p>
However! <em>offset</em> + <em>length</em> may be *beyond* the end of the existing target data. "Where the heck does the text come from, then?" If you start at <em>offset</em>, and append <em>length</em> bytes one at a time, it'll work out --- you're adding new bytes to the end at the same rate you're reading them from the middle. Thus, if your current target text is "abcdefgh", and you get an <code>svn_txdelta_target</code> instruction whose <em>offset</em> is <em>6</em> and whose <em>length</em> is <em>7</em>, the resulting string is "abcdefghghghghg". This trick is actually useful in encoding long runs of consecutive characters, long runs of CR/LF pairs, etc. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="ggf3573b839c4304ba1da5b1439670f8b23200127b02e484799d0ad81c6761db60"></a><!-- doxytag: member="svn_txdelta_new" ref="ggf3573b839c4304ba1da5b1439670f8b23200127b02e484799d0ad81c6761db60" args="" -->svn_txdelta_new</em>&nbsp;</td><td>
Append the <em>length</em> bytes at <em>offset</em> in the window's <em>new</em> string to the target. 
<p>
It must be the case that <em>0</em> &lt;= <em>offset</em> &lt; <em>offset</em> + <em>length</em> &lt;= length of <em>new</em>. Windows MUST use new data in ascending order with no overlap at the moment; <a class="el" href="group__svn__delta__txt__delta.html#g21c7186240b711f22c195bee3afcdcc1" title="Similar to svn_txdelta_to_svndiff2, but always using svndiff version 0.">svn_txdelta_to_svndiff()</a> depends on this. </td></tr>
</table>
</dl>

<p>Definition at line <a class="el" href="svn__delta_8h-source.html#l00087">87</a> of file <a class="el" href="svn__delta_8h-source.html">svn_delta.h</a>.</p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="ga0b249e231d98783f961cde277b908e7"></a><!-- doxytag: member="svn_delta.h::svn_txdelta" ref="ga0b249e231d98783f961cde277b908e7" args="(svn_txdelta_stream_t **stream, svn_stream_t *source, svn_stream_t *target, apr_pool_t *pool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void svn_txdelta           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__svn__delta__txt__delta.html#gf599af000e3c3b976c17fd4e101ff7cf">svn_txdelta_stream_t</a> **&nbsp;</td>
          <td class="paramname"> <em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__svn__io__byte__streams.html#g06d6291c397e63f895deb92a2c14e6af">svn_stream_t</a> *&nbsp;</td>
          <td class="paramname"> <em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__svn__io__byte__streams.html#g06d6291c397e63f895deb92a2c14e6af">svn_stream_t</a> *&nbsp;</td>
          <td class="paramname"> <em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">apr_pool_t *&nbsp;</td>
          <td class="paramname"> <em>pool</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set <em>*stream</em> to a pointer to a delta stream that will turn the byte string from <em>source</em> into the byte stream from <em>target</em>. 
<p>
<em>source</em> and <em>target</em> are both readable generic streams. When we call <a class="el" href="group__svn__delta__txt__delta.html#gc27c74c1dacbb03d733367858e397d51" title="Set *window to a pointer to the next window from the delta stream stream.">svn_txdelta_next_window()</a> on <em>*stream</em>, it will read from <em>source</em> and <em>target</em> to gather as much data as it needs.<p>
Do any necessary allocation in a sub-pool of <em>pool</em>. 
</div>
</div><p>
<a class="anchor" name="ga3a54c3cdde467a57666ee8d13141738"></a><!-- doxytag: member="svn_delta.h::svn_txdelta_apply" ref="ga3a54c3cdde467a57666ee8d13141738" args="(svn_stream_t *source, svn_stream_t *target, unsigned char *result_digest, const char *error_info, apr_pool_t *pool, svn_txdelta_window_handler_t *handler, void **handler_baton)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void svn_txdelta_apply           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__svn__io__byte__streams.html#g06d6291c397e63f895deb92a2c14e6af">svn_stream_t</a> *&nbsp;</td>
          <td class="paramname"> <em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__svn__io__byte__streams.html#g06d6291c397e63f895deb92a2c14e6af">svn_stream_t</a> *&nbsp;</td>
          <td class="paramname"> <em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>result_digest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>error_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">apr_pool_t *&nbsp;</td>
          <td class="paramname"> <em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__svn__delta__txt__delta.html#g1c0d461a3f244928d7f0339c1cbe3219">svn_txdelta_window_handler_t</a> *&nbsp;</td>
          <td class="paramname"> <em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&nbsp;</td>
          <td class="paramname"> <em>handler_baton</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Prepare to apply a text delta. 
<p>
<em>source</em> is a readable generic stream yielding the source data, <em>target</em> is a writable generic stream to write target data to, and allocation takes place in a sub-pool of <em>pool</em>. On return, <em>*handler</em> is set to a window handler function and <em>*handler_baton</em> is set to the value to pass as the <em>baton</em> argument to <em>*handler</em>.<p>
If <em>result_digest</em> is non-NULL, it points to APR_MD5_DIGESTSIZE bytes of storage, and the final call to <em>handler</em> populates it with the MD5 digest of the resulting fulltext.<p>
If <em>error_info</em> is non-NULL, it is inserted parenthetically into the error string for any error returned by <a class="el" href="group__svn__delta__txt__delta.html#ga3a54c3cdde467a57666ee8d13141738" title="Prepare to apply a text delta.">svn_txdelta_apply()</a> or <em>*handler</em>. (It is normally used to provide path information, since there's nothing else in the delta application's context to supply a path for error messages.)<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>To avoid lifetime issues, <em>error_info</em> is copied into <em>pool</em> or a subpool thereof. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g91ce8c5539fd82aa891da56d10262677"></a><!-- doxytag: member="svn_delta.h::svn_txdelta_apply_instructions" ref="g91ce8c5539fd82aa891da56d10262677" args="(svn_txdelta_window_t *window, const char *sbuf, char *tbuf, apr_size_t *tlen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void svn_txdelta_apply_instructions           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsvn__txdelta__window__t.html">svn_txdelta_window_t</a> *&nbsp;</td>
          <td class="paramname"> <em>window</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>sbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>tbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">apr_size_t *&nbsp;</td>
          <td class="paramname"> <em>tlen</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Apply the instructions from <em>window</em> to a source view <em>sbuf</em> to produce a target view <em>tbuf</em>. 
<p>
<em>sbuf</em> is assumed to have <em>window-&gt;sview_len</em> bytes of data and <em>tbuf</em> is assumed to have room for <em>tlen</em> bytes of output. <em>tlen</em> may be more than <em>window-&gt;tview_len</em>, so return the actual number of bytes written. <em>sbuf</em> is not touched and may be NULL if <em>window</em> contains no source-copy operations. This is purely a memory operation; nothing can go wrong as long as we have a valid window.<p>
<dl class="since" compact><dt><b>Since:</b></dt><dd>New in 1.4 </dd></dl>

</div>
</div><p>
<a class="anchor" name="g208f3793d9c65578c6fc85bb0d8246d9"></a><!-- doxytag: member="svn_delta.h::svn_txdelta_compose_windows" ref="g208f3793d9c65578c6fc85bb0d8246d9" args="(const svn_txdelta_window_t *window_A, const svn_txdelta_window_t *window_B, apr_pool_t *pool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsvn__txdelta__window__t.html">svn_txdelta_window_t</a>* svn_txdelta_compose_windows           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsvn__txdelta__window__t.html">svn_txdelta_window_t</a> *&nbsp;</td>
          <td class="paramname"> <em>window_A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structsvn__txdelta__window__t.html">svn_txdelta_window_t</a> *&nbsp;</td>
          <td class="paramname"> <em>window_B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">apr_pool_t *&nbsp;</td>
          <td class="paramname"> <em>pool</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Compose two delta windows, yielding a third, allocated in <em>pool</em>. 
<p>
<dl class="since" compact><dt><b>Since:</b></dt><dd>New in 1.4 </dd></dl>

</div>
</div><p>
<a class="anchor" name="g5c19d9f9e5049865212fa5cd1ae3df0b"></a><!-- doxytag: member="svn_delta.h::svn_txdelta_md5_digest" ref="g5c19d9f9e5049865212fa5cd1ae3df0b" args="(svn_txdelta_stream_t *stream)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned char* svn_txdelta_md5_digest           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__svn__delta__txt__delta.html#gf599af000e3c3b976c17fd4e101ff7cf">svn_txdelta_stream_t</a> *&nbsp;</td>
          <td class="paramname"> <em>stream</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the md5 digest for the complete fulltext deltified by <em>stream</em>, or <code>NULL</code> if <em>stream</em> has not yet returned its final <code>NULL</code> window. 
<p>
The digest is allocated in the same memory as <em>STREAM</em>. 
</div>
</div><p>
<a class="anchor" name="gc27c74c1dacbb03d733367858e397d51"></a><!-- doxytag: member="svn_delta.h::svn_txdelta_next_window" ref="gc27c74c1dacbb03d733367858e397d51" args="(svn_txdelta_window_t **window, svn_txdelta_stream_t *stream, apr_pool_t *pool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsvn__error__t.html">svn_error_t</a>* svn_txdelta_next_window           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsvn__txdelta__window__t.html">svn_txdelta_window_t</a> **&nbsp;</td>
          <td class="paramname"> <em>window</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__svn__delta__txt__delta.html#gf599af000e3c3b976c17fd4e101ff7cf">svn_txdelta_stream_t</a> *&nbsp;</td>
          <td class="paramname"> <em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">apr_pool_t *&nbsp;</td>
          <td class="paramname"> <em>pool</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set <em>*window</em> to a pointer to the next window from the delta stream <em>stream</em>. 
<p>
When we have completely reconstructed the target string, set <em>*window</em> to zero.<p>
The window will be allocated in <em>pool</em>. 
</div>
</div><p>
<a class="anchor" name="ga1bf544259b22caf4652535e748ad1cf"></a><!-- doxytag: member="svn_delta.h::svn_txdelta_parse_svndiff" ref="ga1bf544259b22caf4652535e748ad1cf" args="(svn_txdelta_window_handler_t handler, void *handler_baton, svn_boolean_t error_on_early_close, apr_pool_t *pool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__svn__io__byte__streams.html#g06d6291c397e63f895deb92a2c14e6af">svn_stream_t</a>* svn_txdelta_parse_svndiff           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__svn__delta__txt__delta.html#g1c0d461a3f244928d7f0339c1cbe3219">svn_txdelta_window_handler_t</a>&nbsp;</td>
          <td class="paramname"> <em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>handler_baton</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="svn__types_8h.html#22b35baddc4213c688d1bb12feea1024">svn_boolean_t</a>&nbsp;</td>
          <td class="paramname"> <em>error_on_early_close</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">apr_pool_t *&nbsp;</td>
          <td class="paramname"> <em>pool</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return a writable generic stream which will parse svndiff-format data into a text delta, invoking <em>handler</em> with <em>handler_baton</em> whenever a new window is ready. 
<p>
If <em>error_on_early_close</em> is <code>TRUE</code>, attempting to close this stream before it has handled the entire svndiff data set will result in <code>SVN_ERR_SVNDIFF_UNEXPECTED_END</code>, else this error condition will be ignored. 
</div>
</div><p>
<a class="anchor" name="g57e1426719fe0dce03fbe227c7bc93e4"></a><!-- doxytag: member="svn_delta.h::svn_txdelta_read_svndiff_window" ref="g57e1426719fe0dce03fbe227c7bc93e4" args="(svn_txdelta_window_t **window, svn_stream_t *stream, int svndiff_version, apr_pool_t *pool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsvn__error__t.html">svn_error_t</a>* svn_txdelta_read_svndiff_window           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsvn__txdelta__window__t.html">svn_txdelta_window_t</a> **&nbsp;</td>
          <td class="paramname"> <em>window</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__svn__io__byte__streams.html#g06d6291c397e63f895deb92a2c14e6af">svn_stream_t</a> *&nbsp;</td>
          <td class="paramname"> <em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>svndiff_version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">apr_pool_t *&nbsp;</td>
          <td class="paramname"> <em>pool</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read and parse one delta window in svndiff format from the readable stream <em>stream</em> and place it in <em>*window</em>, allocating the result in <em>pool</em>. 
<p>
The caller must take responsibility for stripping off the four-byte 'SVN&lt;ver&gt;' header at the beginning of the svndiff document before reading the first window, and must provide the version number (the value of the fourth byte) to each invocation of this routine with the <em>svndiff_version</em> argument.<p>
<dl class="since" compact><dt><b>Since:</b></dt><dd>New in 1.1. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g2ff49b23d075adb6a70576e122692df5"></a><!-- doxytag: member="svn_delta.h::svn_txdelta_send_stream" ref="g2ff49b23d075adb6a70576e122692df5" args="(svn_stream_t *stream, svn_txdelta_window_handler_t handler, void *handler_baton, unsigned char *digest, apr_pool_t *pool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsvn__error__t.html">svn_error_t</a>* svn_txdelta_send_stream           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__svn__io__byte__streams.html#g06d6291c397e63f895deb92a2c14e6af">svn_stream_t</a> *&nbsp;</td>
          <td class="paramname"> <em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__svn__delta__txt__delta.html#g1c0d461a3f244928d7f0339c1cbe3219">svn_txdelta_window_handler_t</a>&nbsp;</td>
          <td class="paramname"> <em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>handler_baton</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>digest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">apr_pool_t *&nbsp;</td>
          <td class="paramname"> <em>pool</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Send the contents of <em>stream</em> to window-handler <em>handler/<em>baton</em>.</em> 
<p>
This is effectively a 'copy' operation, resulting in delta windows that make the target equivalent to the stream.<p>
If <em>digest</em> is non-NULL, populate it with the md5 checksum for the fulltext that was deltified (<em>digest</em> must be at least <code>APR_MD5_DIGESTSIZE</code> bytes long).<p>
All temporary allocation is performed in <em>pool</em>. 
</div>
</div><p>
<a class="anchor" name="g3ec9b8d77259b8de4edf33ad775dc4b0"></a><!-- doxytag: member="svn_delta.h::svn_txdelta_send_string" ref="g3ec9b8d77259b8de4edf33ad775dc4b0" args="(const svn_string_t *string, svn_txdelta_window_handler_t handler, void *handler_baton, apr_pool_t *pool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsvn__error__t.html">svn_error_t</a>* svn_txdelta_send_string           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsvn__string__t.html">svn_string_t</a> *&nbsp;</td>
          <td class="paramname"> <em>string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__svn__delta__txt__delta.html#g1c0d461a3f244928d7f0339c1cbe3219">svn_txdelta_window_handler_t</a>&nbsp;</td>
          <td class="paramname"> <em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>handler_baton</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">apr_pool_t *&nbsp;</td>
          <td class="paramname"> <em>pool</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Send the contents of <em>string</em> to window-handler <em>handler/<em>baton</em>.</em> 
<p>
This is effectively a 'copy' operation, resulting in delta windows that make the target equivalent to the value of <em>string</em>.<p>
All temporary allocation is performed in <em>pool</em>. 
</div>
</div><p>
<a class="anchor" name="g9e98ac11b1719e838de16eac06812e9d"></a><!-- doxytag: member="svn_delta.h::svn_txdelta_send_txstream" ref="g9e98ac11b1719e838de16eac06812e9d" args="(svn_txdelta_stream_t *txstream, svn_txdelta_window_handler_t handler, void *handler_baton, apr_pool_t *pool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsvn__error__t.html">svn_error_t</a>* svn_txdelta_send_txstream           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__svn__delta__txt__delta.html#gf599af000e3c3b976c17fd4e101ff7cf">svn_txdelta_stream_t</a> *&nbsp;</td>
          <td class="paramname"> <em>txstream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__svn__delta__txt__delta.html#g1c0d461a3f244928d7f0339c1cbe3219">svn_txdelta_window_handler_t</a>&nbsp;</td>
          <td class="paramname"> <em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>handler_baton</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">apr_pool_t *&nbsp;</td>
          <td class="paramname"> <em>pool</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Send the contents of <em>txstream</em> to window-handler <em>handler/<em>baton</em>.</em> 
<p>
Windows will be extracted from the stream and delivered to the handler.<p>
All temporary allocation is performed in <em>pool</em>. 
</div>
</div><p>
<a class="anchor" name="g210cb0b472413741f63b903f413450f3"></a><!-- doxytag: member="svn_delta.h::svn_txdelta_skip_svndiff_window" ref="g210cb0b472413741f63b903f413450f3" args="(apr_file_t *file, int svndiff_version, apr_pool_t *pool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsvn__error__t.html">svn_error_t</a>* svn_txdelta_skip_svndiff_window           </td>
          <td>(</td>
          <td class="paramtype">apr_file_t *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>svndiff_version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">apr_pool_t *&nbsp;</td>
          <td class="paramname"> <em>pool</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read and skip one delta window in svndiff format from the file <em>file</em>. 
<p>
<em>pool</em> is used for temporary allocations. The caller must take responsibility for stripping off the four-byte 'SVN&lt;ver&gt;' header at the beginning of the svndiff document before reading or skipping the first window, and must provide the version number (the value of the fourth byte) to each invocation of this routine with the <em>svndiff_version</em> argument.<p>
<dl class="since" compact><dt><b>Since:</b></dt><dd>New in 1.1. </dd></dl>

</div>
</div><p>
<a class="anchor" name="gb4e0ec602322485190a512512e874d73"></a><!-- doxytag: member="svn_delta.h::svn_txdelta_stream_create" ref="gb4e0ec602322485190a512512e874d73" args="(void *baton, svn_txdelta_next_window_fn_t next_window, svn_txdelta_md5_digest_fn_t md5_digest, apr_pool_t *pool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__svn__delta__txt__delta.html#gf599af000e3c3b976c17fd4e101ff7cf">svn_txdelta_stream_t</a>* svn_txdelta_stream_create           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>baton</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__svn__delta__txt__delta.html#g296cf74e5f15272c6c3d00004eddf406">svn_txdelta_next_window_fn_t</a>&nbsp;</td>
          <td class="paramname"> <em>next_window</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__svn__delta__txt__delta.html#gcda8999d7a2265e755f242046e28b5e9">svn_txdelta_md5_digest_fn_t</a>&nbsp;</td>
          <td class="paramname"> <em>md5_digest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">apr_pool_t *&nbsp;</td>
          <td class="paramname"> <em>pool</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create and return a generic text delta stream with <em>baton</em>, <em>next_window</em> and <em>md5_digest</em>. 
<p>
Allocate the new stream in <em>pool</em>.<p>
<dl class="since" compact><dt><b>Since:</b></dt><dd>New in 1.4. </dd></dl>

</div>
</div><p>
<a class="anchor" name="ga2f6fd3e26aafb6fb9e283c0f9a0f50c"></a><!-- doxytag: member="svn_delta.h::svn_txdelta_target_push" ref="ga2f6fd3e26aafb6fb9e283c0f9a0f50c" args="(svn_txdelta_window_handler_t handler, void *handler_baton, svn_stream_t *source, apr_pool_t *pool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__svn__io__byte__streams.html#g06d6291c397e63f895deb92a2c14e6af">svn_stream_t</a>* svn_txdelta_target_push           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__svn__delta__txt__delta.html#g1c0d461a3f244928d7f0339c1cbe3219">svn_txdelta_window_handler_t</a>&nbsp;</td>
          <td class="paramname"> <em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>handler_baton</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__svn__io__byte__streams.html#g06d6291c397e63f895deb92a2c14e6af">svn_stream_t</a> *&nbsp;</td>
          <td class="paramname"> <em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">apr_pool_t *&nbsp;</td>
          <td class="paramname"> <em>pool</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return a writable stream which, when fed target data, will send delta windows to <em>handler/<em>handler_baton</em> which</em> transform the data in <em>source</em> to the target data. 
<p>
As usual, the window handler will receive a NULL window to signify the end of the window stream. The stream handler functions will read data from <em>source</em> as necessary.<p>
<dl class="since" compact><dt><b>Since:</b></dt><dd>New in 1.1. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g21c7186240b711f22c195bee3afcdcc1"></a><!-- doxytag: member="svn_delta.h::svn_txdelta_to_svndiff" ref="g21c7186240b711f22c195bee3afcdcc1" args="(svn_stream_t *output, apr_pool_t *pool, svn_txdelta_window_handler_t *handler, void **handler_baton)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void svn_txdelta_to_svndiff           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__svn__io__byte__streams.html#g06d6291c397e63f895deb92a2c14e6af">svn_stream_t</a> *&nbsp;</td>
          <td class="paramname"> <em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">apr_pool_t *&nbsp;</td>
          <td class="paramname"> <em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__svn__delta__txt__delta.html#g1c0d461a3f244928d7f0339c1cbe3219">svn_txdelta_window_handler_t</a> *&nbsp;</td>
          <td class="paramname"> <em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&nbsp;</td>
          <td class="paramname"> <em>handler_baton</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Similar to svn_txdelta_to_svndiff2, but always using svndiff version 0. 
<p>
<dl compact><dt><b><a class="el" href="deprecated.html#_deprecated000092">Deprecated:</a></b></dt><dd>Provided for backward compatibility with the 1.3 API. </dd></dl>

</div>
</div><p>
<a class="anchor" name="gf7354f923339d3338c3083e91bfee472"></a><!-- doxytag: member="svn_delta.h::svn_txdelta_to_svndiff2" ref="gf7354f923339d3338c3083e91bfee472" args="(svn_txdelta_window_handler_t *handler, void **handler_baton, svn_stream_t *output, int svndiff_version, apr_pool_t *pool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void svn_txdelta_to_svndiff2           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__svn__delta__txt__delta.html#g1c0d461a3f244928d7f0339c1cbe3219">svn_txdelta_window_handler_t</a> *&nbsp;</td>
          <td class="paramname"> <em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&nbsp;</td>
          <td class="paramname"> <em>handler_baton</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__svn__io__byte__streams.html#g06d6291c397e63f895deb92a2c14e6af">svn_stream_t</a> *&nbsp;</td>
          <td class="paramname"> <em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>svndiff_version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">apr_pool_t *&nbsp;</td>
          <td class="paramname"> <em>pool</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Prepare to produce an svndiff-format diff from text delta windows. 
<p>
<em>output</em> is a writable generic stream to write the svndiff data to. Allocation takes place in a sub-pool of <em>pool</em>. On return, <em>*handler</em> is set to a window handler function and <em>*handler_baton</em> is set to the value to pass as the <em>baton</em> argument to <em>*handler</em>. The svndiff version is <em>svndiff_version</em>.<p>
<dl class="since" compact><dt><b>Since:</b></dt><dd>New in 1.4. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g743bfce28d8d52bfe5aead62362e9c16"></a><!-- doxytag: member="svn_delta.h::svn_txdelta_window_dup" ref="g743bfce28d8d52bfe5aead62362e9c16" args="(const svn_txdelta_window_t *window, apr_pool_t *pool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsvn__txdelta__window__t.html">svn_txdelta_window_t</a>* svn_txdelta_window_dup           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsvn__txdelta__window__t.html">svn_txdelta_window_t</a> *&nbsp;</td>
          <td class="paramname"> <em>window</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">apr_pool_t *&nbsp;</td>
          <td class="paramname"> <em>pool</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return a deep copy of <em>window</em>, allocated in <em>pool</em>. 
<p>
<dl class="since" compact><dt><b>Since:</b></dt><dd>New in 1.3. </dd></dl>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Oct 24 16:18:29 2008 for Subversion by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
